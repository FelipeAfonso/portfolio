---
import Layout from "../layouts/Layout.astro";
import ExperienceCard from "../components/ExperienceCard.astro";
import ProjectCard from "../components/ProjectCard.astro";
import { professional } from "../../content/professional";
import { academic } from "../../content/academic";
import { projects } from "../../content/projects";
import dayjs from "dayjs";
import advancedFormat from "dayjs/plugin/advancedFormat";
import parse from "dayjs/plugin/customParseFormat";
dayjs.extend(advancedFormat);
dayjs.extend(parse);

const date_sort = (a: any, b: any) => {
    const is_current = (date: string) => date === "isCurrent";
    if (is_current(a.endDate)) return -1;
    if (is_current(b.endDate)) return 1;
    const aend = dayjs(a.endDate, "MM/YYYY");
    const bend = dayjs(b.endDate, "MM/YYYY");
    return aend.isBefore(bend) ? 1 : -1;
};

const professional_parsed = Object.values(professional).sort(date_sort);
const academic_parsed = Object.values(academic).sort(date_sort);
const nav = [
    { label: "About me", href: "/#about" },
    { label: "Experience", href: "/#experience" },
    { label: "Projects", href: "/#projects" },
    { label: "Contact", href: "/#contact" },
];
---

<Layout title="Felipe Afonso's Portfolio">
    <!-- <div -->
    <!--     x-data="{ open: false }" -->
    <!--     class="text-white p-8 text-xl font-bold app-container" -->
    <!-- > -->
    <!--     <button @click="open = true">Expand</button> -->
    <!--     <span x-show="open"> Content... </span> -->
    <!-- </div> -->
    <main class="app-container py-8 text-white">
        <div class="grid gap-4 sm:grid-cols-2">
            <content class="flex flex-col justify-center">
                <h1 class="text-xl font-bold lg:text-3xl">
                    Hi! I'm Felipe Afonso
                </h1>
                <p class="max-w-sm text-lg font-medium">
                    I'm a Software Engineer focused on Front End Applications.
                    Currently working at Liftup Capital.
                </p>
                <nav role="list" class="space-y-2 py-4 text-xl font-light">
                    {
                        nav.map(({ label, href }) => (
                            <a
                                class="block transition-all ease-in hover:font-normal hover:text-indigo-400"
                                role="listitem"
                                href={href}
                            >
                                &rightarrow; {label}
                            </a>
                        ))
                    }
                </nav>
            </content>
            <figure
                class="group max-w-lg rounded-xl px-2 pt-2 transition-all ease-in hover:bg-zinc-800"
            >
                <img
                    src="/me-min.jpg"
                    class="aspect-square w-full rounded-lg object-cover"
                    alt="My picture at my office's balcony"
                />
                <span
                    class="block py-2 text-center text-transparent transition-all ease-in group-hover:text-neutral-100"
                >
                    Me at my office's balcony
                </span>
            </figure>
        </div>
    </main>
    <hr class="app-container border-neutral-700" />
    <section id="about" class="app-container py-8 text-white">
        <h2 class="text-lg font-bold lg:text-2xl">About me</h2>
        <content class="grid gap-x-8 gap-y-4 font-serif sm:grid-cols-2">
            <p class="max-w-lg pt-4 text-lg font-medium">
                A passionate programmer fluent in multiple languages and diverse
                technologies. Often recognized as the team's Arch Linux and
                Neovim aficionado.
            </p>
            <p class="max-w-lg pt-4 text-lg font-medium">
                My Master of Computer Science degree emphasized Software
                Engineering, with a research focus on Mobile Cross-Platform
                development frameworks.
            </p>
            <p class="max-w-lg pt-4 text-lg font-medium">
                Honed and developed within small dev teams at startups, focusing
                on product creation and efficient delivery. Always seeking new
                challenges and opportunities for learning and growth.
            </p>
            <p class="max-w-lg pt-4 text-lg font-medium">
                I'm always improving my skills in multiple areas, from Front End
                Development to Game Development, and even non tech-related
                skills like music and mathematics.
            </p>
        </content>
    </section>
    <hr class="app-container border-neutral-700" />
    <section id="experience" class="app-container py-8 text-white">
        <h2 class="text-lg font-bold lg:text-2xl">Experience</h2>
        <div class="grid gap-4 py-8 sm:grid-cols-2">
            <div class="flow-root">
                <p class="pb-6 font-medium sm:text-lg">Professional</p>
                <ul role="list" class="-mb-8">
                    {
                        professional_parsed.map((item, i) => (
                            <ExperienceCard
                                {...item}
                                isLast={i === professional_parsed.length - 1}
                            />
                        ))
                    }
                </ul>
            </div>
            <div class="flow-root">
                <p class="pb-6 font-medium sm:text-lg">Academic</p>
                <ul role="list" class="-mb-8">
                    {
                        academic_parsed.map((item, i) => (
                            <ExperienceCard
                                {...item}
                                isLast={i === academic_parsed.length - 1}
                            />
                        ))
                    }
                </ul>
            </div>
        </div>
    </section>
    <hr class="app-container border-neutral-700" />
    <section id="projects" class="app-container py-8 text-white">
        <h2 class="text-lg font-bold lg:text-2xl">Projects</h2>
        <div class="grid gap-4 py-8 sm:grid-cols-2 md:grid-cols-3">
            {
                Object.entries(projects).map(([id, prj]) => (
                    <ProjectCard id={id} {...prj} />
                ))
            }
        </div>
    </section>
</Layout>
